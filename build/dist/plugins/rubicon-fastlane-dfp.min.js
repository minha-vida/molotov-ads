!function e(t,o,n){function i(s,l){if(!o[s]){if(!t[s]){var a="function"==typeof require&&require;if(!l&&a)return a(s,!0);if(r)return r(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var d=o[s]={exports:{}};t[s][0].call(d.exports,function(e){var o=t[s][1][e];return i(o||e)},d,d.exports,e,t,o,n)}return o[s].exports}for(var r="function"==typeof require&&require,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(e){this.HTMLElement=e,this.lazyloadEnabled=!1,this.autoRefreshEnabled=!1,this.autoRefreshCounter=1}return e}();o.AdSlot=n},{}],2:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var n=e("./logger"),i=e("./viewport");!function(e){function t(e,t,i){void 0===t&&(t={}),e.autoRefreshEnabled&&(e.autoRefreshCounter<=e.autoRefreshLimit?(n.Logger.infoWithTime(e.name,"refreshing in",e.autoRefreshTime,"seconds (",e.autoRefreshCounter,"/",e.autoRefreshLimit,")"),setTimeout(o,1e3*e.autoRefreshTime,e,i,t),e.autoRefreshCounter++):(e.autoRefreshEnabled=!1,n.Logger.infoWithTime(e.name,"auto refresh ended")))}function o(t,o,i){n.Logger.logWithTime(t.name,"starting refresh for auto rotate"),e.refreshIfViewable(t,o,i)}function r(t,o,r){if(document.hidden){n.Logger.logWithTime(t.name,"marked for refresh on visibilitychange");var s=function(){e.refreshIfViewable(t,o,r),document.removeEventListener("visibilitychange",s)};return void document.addEventListener("visibilitychange",s)}if(i.Viewport.getCurrentViewabilityPercentage(t.HTMLElement)>=50)o(t,r);else{n.Logger.logWithTime(t.name,"viewablity lower than 50%, not refreshing");var l=setInterval(function(){i.Viewport.getCurrentViewabilityPercentage(t.HTMLElement)>=50&&(o(t,r),clearInterval(l))},5e3)}}e.start=t,e.refreshIfViewable=r}(o.AutoRefresh||(o.AutoRefresh={}))},{"./logger":3,"./viewport":4}],3:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});!function(e){function t(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]}function o(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];t(a(),"->",e.join(" "))}function n(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]}function i(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];n(a(),"->",e.join(" "))}function r(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]}function s(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]}function l(){}function a(){return(new Date).getHours()+":"+(new Date).getMinutes()+":"+(new Date).getSeconds()+"."+(new Date).getMilliseconds()}location.hash.indexOf("development");e.log=t,e.logWithTime=o,e.info=n,e.infoWithTime=i,e.warn=r,e.error=s,e.consoleWelcomeMessage=l}(o.Logger||(o.Logger={}))},{}],4:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});!function(e){function t(e,t){var o=e.getBoundingClientRect();return o.top>=0&&o.left>=0&&o.bottom-t<=(window.innerHeight||document.documentElement.clientHeight)&&o.right<=(window.innerWidth||document.documentElement.clientWidth)}function o(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)}function n(e){var t=e.getBoundingClientRect().top,o=t>0?window.innerHeight-t:Math.abs(t),n=o/e.clientHeight;return n=t>0?n:1-n,n<0&&(n=0),n>1&&(n=1),100*n}e.isElementInViewport=t,e.isElementVisible=o,e.getCurrentViewabilityPercentage=n}(o.Viewport||(o.Viewport={}))},{}],5:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(exports,"__esModule",{value:!0});var adslot_1=require("../../modules/adslot"),DoubleClickAdSlot=function(_super){function DoubleClickAdSlot(HTMLElement){var _this=_super.call(this,HTMLElement)||this;_this.HTMLElement=HTMLElement;var ds=HTMLElement.dataset,size=eval(ds.madSize);return _this.adUnit=ds.madAdunit,_this.name=HTMLElement.id,_this.size=size,_this.isOutOfPage=Boolean(ds.madOutOfPage),_this.autoRefreshTime=Number(ds.madAutoRefreshInSeconds)||0,_this.autoRefreshLimit=Number(ds.madAutoRefreshLimit)||0,_this.lazyloadOffset=Number(ds.madLazyloadOffset),_this.autoRefreshEnabled=_this.autoRefreshTime>0,_this.lazyloadOffset&&(_this.lazyloadOffset=_this.lazyloadOffset||0,_this.lazyloadEnabled=!0),_this}return __extends(DoubleClickAdSlot,_super),DoubleClickAdSlot.prototype.defineSlot=function(){this.isOutOfPage?this.doubleclickAdSlot=googletag.defineOutOfPageSlot(this.adUnit,this.name).addService(googletag.pubads()):this.doubleclickAdSlot=googletag.defineSlot(this.adUnit,this.size,this.name).addService(googletag.pubads())},DoubleClickAdSlot.prototype.display=function(){googletag.display(this.name),this.lazyloadEnabled||this.refresh()},DoubleClickAdSlot.prototype.refresh=function(){googletag.pubads().refresh([this.doubleclickAdSlot])},DoubleClickAdSlot.prototype.getDoubleclickAdSlot=function(){return this.doubleclickAdSlot},DoubleClickAdSlot}(adslot_1.AdSlot);exports.DoubleClickAdSlot=DoubleClickAdSlot},{"../../modules/adslot":1}],6:[function(e,t,o){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var i=e("../doubleclick/doubleclick.adslot"),r=function(e){function t(t){var o=e.call(this,t)||this;return o.HTMLElement=t,o.rubiconPosition=t.dataset.madRubiconPosition,o}return n(t,e),t.prototype.defineSlot=function(){this.rubiconAdSlot=rubicontag.defineSlot(this.adUnit,this.size,this.name).setPosition(this.rubiconPosition).setFPI("adunit",this.adUnit.substring(this.adUnit.lastIndexOf("/")+1)).setFPI("position",this.rubiconPosition)},t.prototype.defineSlotDoubleclick=function(){e.prototype.defineSlot.call(this)},t.prototype.setTargetingForGPTSlot=function(){rubicontag.setTargetingForGPTSlot(e.prototype.getDoubleclickAdSlot.call(this))},t}(i.DoubleClickAdSlot);o.RubiconFastlaneDfpAdSlot=r},{"../doubleclick/doubleclick.adslot":5}],7:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../modules/viewport"),i=e("./rubicon.fastlane.dfp.adslot"),r=e("../../modules/logger"),s=e("../../modules/autorefresh"),l=function(){function e(){this.name="RubiconFastlaneDfp",this.slots={},this.loaded=!1}return e.prototype.init=function(e){this.slots=this.getSlots();var t=this;return new Promise(function(o,n){googletag.cmd.push(function(){googletag.pubads().disableInitialLoad()}),rubicontag.cmd.push(function(){for(var n in t.slots)t.slots[n].rubiconPosition&&(t.slots[n].defineSlot(),r.Logger.log(t.name,"Rubicon ad slot defined: ",t.slots[n]));for(var i in e.setFPI){var l=e.setFPI[i];r.Logger.log(t.name,"targeting FPI",i,"as",l),rubicontag.setFPI(i,l)}for(var i in e.setFPV){var l=e.setFPV[i];r.Logger.log(t.name,"targeting FPV",i,"as",l),rubicontag.setFPV(i,l)}rubicontag.run(function(){e.rubicontagRun&&e.rubicontagRun(),t.refreshAds(),t.loaded=!0}),googletag.cmd.push(function(){for(var n in t.slots)t.slots[n].defineSlotDoubleclick(),r.Logger.log(t.name,"DFP ad slot defined: ",t.slots[n]);for(var i in e.customTargets){var l=e.customTargets[i];r.Logger.log("targeting",i,"as",l),googletag.pubads().setTargeting(i,[l])}googletag.pubads().addEventListener("slotRenderEnded",function(o){r.Logger.logWithTime(o.slot.getSlotElementId(),"finished slot rendering");var n=t.slots[o.slot.getSlotElementId()];s.AutoRefresh.start(n,e,t.autoRefresh),e.onSlotRenderEnded&&e.onSlotRenderEnded(o)}),r.Logger.info("enabling services"),googletag.enableServices();for(var n in t.slots)googletag.display(t.slots[n].name),r.Logger.logWithTime(t.slots[n].name,"started displaying");t.onScrollRefreshLazyloadedSlots(),setTimeout(function(){t.loaded||t.refreshAds()},1500),o()})})})},e.prototype.refreshAds=function(){for(var e in this.slots){var t=this.slots[e];t.lazyloadEnabled||(t.setTargetingForGPTSlot(),t.refresh())}},e.prototype.onScrollRefreshLazyloadedSlots=function(){var e=this;window.addEventListener("scroll",function(t){for(var o in e.slots){var i=e.slots[o];i.lazyloadEnabled&&n.Viewport.isElementInViewport(i.HTMLElement,i.lazyloadOffset)&&(i.setTargetingForGPTSlot(),i.refresh(),i.lazyloadEnabled=!1)}})},e.prototype.autoRefresh=function(e,t){r.Logger.logWithTime(e.name,"started refreshing"),e.rubiconPosition?rubicontag.cmd.push(function(){e.defineSlot(),r.Logger.log(self.name,"Rubicon ad slot defined: ",e),rubicontag.run(function(){e.setTargetingForGPTSlot(),e.refresh()},{slots:[e.rubiconAdSlot]})}):e.refresh()},e.prototype.getSlots=function(){var e={};for(var t in window._molotovAds.slots){var o=window._molotovAds.slots[t].HTMLElement;(o.dataset.madAdunit||o.dataset.madRubicon)&&(e[o.id]=new i.RubiconFastlaneDfpAdSlot(o),window._molotovAds.slots[o.id]=e[o.id])}return e},e}();o.RubiconFastlaneDfp=l,window._molotovAds.loadPlugin(new l)},{"../../modules/autorefresh":2,"../../modules/logger":3,"../../modules/viewport":4,"./rubicon.fastlane.dfp.adslot":6}]},{},[6,7]);